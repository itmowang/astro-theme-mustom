<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.14.2"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://blog5.loli.wang/page/6/"><!-- Primary Meta Tags --><title>é­”ç‹ ã® åšå®¢</title><meta name="title" content="é­”ç‹ ã® åšå®¢"><meta name="description" content="é­”ç‹ ã®éƒ¨è½é˜"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://blog5.loli.wang/page/6/"><meta property="og:title" content="é­”ç‹ ã® åšå®¢"><meta property="og:description" content="é­”ç‹ ã®éƒ¨è½é˜"><meta property="og:image" content="https://blog5.loli.wang/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://blog5.loli.wang/page/6/"><meta property="twitter:title" content="é­”ç‹ ã® åšå®¢"><meta property="twitter:description" content="é­”ç‹ ã®éƒ¨è½é˜"><meta property="twitter:image" content="https://blog5.loli.wang/blog-placeholder-1.jpg"><link rel="stylesheet" href="/_astro/about.B_DInz0N.css">
<style>footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;background:linear-gradient(var(--gray-gradient)) no-repeat;color:rgb(var(--gray));text-align:center}.social-links[data-astro-cid-sz7xmlte]{display:flex;justify-content:center;gap:1em;margin-top:1em}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{text-decoration:none;color:rgb(var(--gray))}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:hover{color:rgb(var(--gray-dark))}
</style><script type="module">const o=document.querySelectorAll(".theme-controller");o.forEach(e=>{e.addEventListener("change",function(t){t.target.checked&&(localStorage.setItem("theme",t.target.checked),c(t.target.checked))})});function c(e){console.log("å·²ç»åˆ‡æ¢ä¸»é¢˜",e)}document.addEventListener("DOMContentLoaded",function(){const e=localStorage.getItem("theme");if(e){c(e);const t=document.querySelector(`input[value="${e}"]`);t&&(t.checked=!0)}});
</script></head> <body> <header class="w-full fixed z-10 header-theme hover:shadow-md transition ease-in-out delay duration-300"> <nav class="flex items-center justify-center  w-full "> <div class="text-xl leading-[80px] header-nav"> <a href="/" class="mx-2 header-nav-item" data-astro-cid-eimmu3lg> é¦–é¡µ </a>  <a href="/blog" class="mx-2 header-nav-item" data-astro-cid-eimmu3lg> å½’æ¡£ </a>  <a href="/about" class="mx-2 header-nav-item" data-astro-cid-eimmu3lg> å…³äº </a>  <a href="/link" class="mx-2 header-nav-item" data-astro-cid-eimmu3lg> å‹é“¾ </a>  </div> <div class="flex items-center"> <a href="https://m.webtoo.ls/@astro" class="ml-2 mr-2" target="_blank"> <span class="sr-only">Follow Astro on Mastodon</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill="currentColor" d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.16-4.339.16-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.168 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"></path></svg> </a> <a href="https://twitter.com/astrodotbuild" class="mr-2" target="_blank"> <span class="sr-only">Follow Astro on Twitter</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill="currentColor" d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.165 9.165 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.163 3.163 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.616 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.16 6.16 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path></svg> </a> <a href="https://github.com/withastro/astro" class="mr-2" target="_blank"> <span class="sr-only">Go to Astro's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.16-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg> </a> </div> </nav> </header> <main> <div class="relative"> <div class="bg-urls bg-no-repeat bg-cover h-dvh bg-center relative"> <div class="absolute inset-0 bg-gradient-to-t from-white"></div> </div> <div class="absolute inset-0"> <div class="min-h-dvh">  <div class="container mx-auto"> <div class="flex pt-[120px]"> <!-- å·¦ä¾§ä¿¡æ¯ --> <div class="w-2/6"> <div class="myCard card card-side bg-color shadow-xl"> <figure> <img src="https://d-sketon.top/img/_backwebp/bg26.webp" alt="Movie" class="h-full w-[200px] object-cover object-top"> </figure> <div class="card-body p-4"> <h2 class="card-title flex justify-center my-title">MoWang</h2> <div class="flex justify-center my-desc">é­”ç‹çš„ Blog </div> <div class="flex w-full flex-col lg:flex-row"> <div class="card rounded-box grid h-16 flex-grow place-items-center"> <div> <div class="flex justify-center my-cate">æ–‡ç« </div> <div class="flex justify-center my-number">11</div> </div> </div> <div class="divider sm:divider-horizontal"></div> <div class="card rounded-box grid h-16 flex-grow place-items-center"> <div> <div class="flex justify-center my-cate">åˆ†ç±»</div> <div class="flex justify-center my-number">11</div> </div> </div> <div class="divider sm:divider-horizontal"></div> <div class="card rounded-box grid h-16 flex-grow place-items-center"> <div> <div class="flex justify-center my-cate">æ ‡ç­¾</div> <div class="flex justify-center my-number">11</div> </div> </div> </div> <div class="flex justify-between"> <div> <button class="btn btn-sm btn-outline btn-primary">é¦–é¡µ</button> </div> <div> <button class="btn btn-sm btn-outline btn-primary">å½’æ¡£</button> </div> <div> <button class="btn btn-sm btn-outline btn-primary">å…³äº</button> </div> </div> <div class="decoration-wavy italic text-center my-yy">å¹´å°‘ä¸å¾—ä¹‹ç‰©,ç»ˆå°†å›°å…¶ä¸€ç”Ÿ</div> </div> </div> <div class="mt-6"> <div class="card bg-color  shadow-xl"> <div class="card-body"> <h2 class="card-title">æ ‡ç­¾äº‘é¢„ç•™ç‚¹</h2> <p> åç»­ä½ æ‰“ç®—åšç‚¹ä»€ä¹ˆ?</p> </div> </div> </div> <div class="mt-6"> <div class="card bg-color shadow-xl"> <div class="card-body"> <h2 class="card-title">Theme</h2> <div class="form-control"> <label class="label cursor-pointer gap-4"> <span class="label-text">æ˜¥</span> <input type="radio" name="theme-radios" class="radio theme-controller" value="spring"> </label> </div> <div class="form-control"> <label class="label cursor-pointer gap-4"> <span class="label-text">å¤</span> <input type="radio" name="theme-radios" class="radio theme-controller" value="summer"> </label> </div> <div class="form-control"> <label class="label cursor-pointer gap-4"> <span class="label-text">ç§‹</span> <input type="radio" name="theme-radios" class="radio theme-controller" value="autumn"> </label> </div> <div class="form-control"> <label class="label cursor-pointer gap-4"> <span class="label-text">å†¬</span> <input type="radio" name="theme-radios" class="radio theme-controller" value="winter"> </label> </div> </div> </div>  </div> </div> <!-- å³ä¾§åˆ—è¡¨æˆ–è€…å†…å®¹ --> <div class="w-4/6 mb-4"> <div class="mx-4"><a href="/blog/2023-9-04-astroxxq/doc/index.html" title="ä¸ªäººAstroä¸»é¢˜ - SXQ"><div class="card bg-color cursor-pointer	 postCard rounded-lg w-full mb-4 shadow-xl flex relative hover:shadow-md transition ease-in-out delay duration-300 hover:scale-95"><div class="flex"><div class="w-full p-4"><div class="flex justify-between"><div></div><div class="flex tools"><div class="text-sm mr-6"><time datetime="Tue Sep 05 2023 23:27:24 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">2023/9/5</time></div><div class="text-sm mr-6">0.1Kå­—</div><div class="text-sm">348 å¤©å‰</div></div></div><div class="flex justify-between items-center mt-2"><div class="w-5/6"><div class="text-2xl font-medium title line-clamp-1 leading-relaxed">ä¸ªäººAstroä¸»é¢˜ - SXQ</div></div><div class="text-sm text-gray-500">æ—¥å¸¸ç”Ÿæ´»</div></div><div class="text-sm text-gray-500 mt-3 line-clamp-4 leading-relaxed"> 
## ä¸ªäººAstroä¸»é¢˜ - SXQ

ä¸€æ¬¾ Astro çš„äºŒæ¬¡å…ƒé£æ ¼æï¼Œåº”è¯¥ä¼šæœ‰äººå–œæ¬¢çš„ï¼Œæ­£åœ¨æ…¢æ…¢å®Œå–„ä¸­ï¼Œæ¬¢è¿æŒ‡å‡ºé—®é¢˜æå‡ºæ„è§ã€‚

Github é¡¹ç›®åœ°å€ ï¼š[https://github.com/itmowang/sxq-astro](https://github.com/itmowang &quot; é­”ç‹ï¼Œåº”è¯¥æœ‰é­”ç‹çš„å§¿æ€ &quot;)

### ä½¿ç”¨æ–¹å¼
``` bash
    # å¼ºçƒˆè¦æ±‚ Node ç‰ˆæœ¬åœ¨ 18x + 
    npm i -g pnpm

    pnpm install
    
    pnpm build

    ç„¶åå°†docsç›®å½•å†…çš„æ–‡ä»¶éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼ŒåŒæ ·çš„ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ github çš„ pages æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥ã€‚
```

### é¢„è§ˆå›¾ 

åŒ…å«ç§»åŠ¨ç«¯ PCç«¯ å¹³æ¿ç«¯çš„ä¸åŒæ ·å¼

é¢„è§ˆåœ°å€: https://blog2.loli.wang


![åˆ‡å›¾1](http://img.blog.loli.wang/2023-9-04-astroxxq/01.png)

![åˆ‡å›¾2](http://img.blog.loli.wang/2023-9-04-astroxxq/02.png)

![åˆ‡å›¾3](http://img.blog.loli.wang/2023-9-04-astroxxq/03.jpg)

![åˆ‡å›¾4](http://img.blog.loli.wang/2023-9-04-astroxxq/04.jpg)

![åˆ‡å›¾5](http://img.blog.loli.wang/2023-9-04-astroxxq/05.png)

![åˆ‡å›¾6](http://img.blog.loli.wang/2023-9-04-astroxxq/06.jpg)

![åˆ‡å›¾6](http://img.blog.loli.wang/2023-9-04-astroxxq/07.jpg)</div></div><div><img src="http://img.blog.loli.wang/2023-9-04-astroxxq/05.png" class="w-[500px] h-[200px] rounded-r-lg object-cover" style="clip-path:polygon(0 0,100% 0,100% 100%,20% 100%)"></div></div></div></a></div><div class="mx-4"><a href="/blog/2023-8-23-webworker/doc/index.html" title="JSä¹‹å¤šçº¿ç¨‹Web Worker API"><div class="card bg-color postCard mb-4 rounded-lg w-full shadow-xl cursor-pointer	 flex relative hover:shadow-md transition ease-in-out delay duration-300 hover:scale-95"><div class="flex"><div><img src="http://img.blog.loli.wang/2023-8-23-WebWorker/01.png" class="w-[500px] h-[200px] rounded-l-lg" style="clip-path:polygon(0 0,88% 0,100% 100%,0 100%)"></div><div class="w-full p-4"><div class="flex justify-between"><div></div><div class="flex tools"><div class="text-sm mr-6"> <time datetime="Thu Aug 31 2023 23:27:24 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">2023/8/31</time> </div><div class="text-sm mr-6">0.1Kå­—</div><div class="text-sm">353 å¤©å‰</div></div></div><div class="flex justify-between items-center mt-2"><div><div class="text-2xl font-medium title">JSä¹‹å¤šçº¿ç¨‹Web Worker API</div></div><div class="text-sm text-gray-500">æ—¥å¸¸ç”Ÿæ´»</div></div><div class="text-sm text-gray-500 mt-3 line-clamp-4 leading-relaxed">
## ä¸ºä»€ä¹ˆéœ€è¦ Web Worker

ç”±äº JavaScript è¯­è¨€ç”¨çš„æ˜¯å•çº¿ç¨‹ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½åšä¸€ä»¶äº‹ï¼Œ å¦‚æœåˆå¤šä¸ªåŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œä¹‹å‰ï¼Œä¸‹æ–¹ä»£ç ä¸ä¼šæ‰§è¡Œã€‚é€ æˆäº†å µå¡ï¼Œé¡µé¢æ— å“åº”ã€‚

ä½†å¦‚æœæŠŠè¿™æ®µä»£ç æ”¾åˆ° Web Worker ä¸­æ‰§è¡Œï¼Œè¿™æ®µé€»è¾‘åœ¨æ‰§è¡Œä¸­ä¾ç„¶å¯ä»¥æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œç”¨æˆ·çš„æ“ä½œä¹Ÿå°±å¯ä»¥æ­£å¸¸å“åº”äº†

## ä»€ä¹ˆæ˜¯ Web Worker

Web Worker ä¸º Web å†…å®¹åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œè„šæœ¬æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•ã€‚çº¿ç¨‹å¯ä»¥æ‰§è¡Œä»»åŠ¡è€Œä¸å¹²æ‰°ç”¨æˆ·ç•Œé¢ã€‚ä½†æ˜¯ä»–ä¸å¯ä»¥æ“ä½œ dom

## Web Worker çš„ä½¿ç”¨é™åˆ¶

### åŒæºé™åˆ¶

    åˆ†é…ç»™ Worker çº¿ç¨‹è¿è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼Œå¿…é¡»ä¸ä¸»çº¿ç¨‹çš„è„šæœ¬æ–‡ä»¶åŒæºã€‚

### æ–‡ä»¶é™åˆ¶

    Worker æ— æ³•è¯»å–æœ¬åœ°æ–‡ä»¶(&#39;file://&#39;) ä»–åŠ è½½çš„åè®®å¿…é¡»è¦æ¥è‡ªç½‘ç»œ

### é€šä¿¡é™åˆ¶

    Worker çº¿ç¨‹æ‰€ä»”çš„å…¨å±€å¯¹è±¡ï¼Œä¸ä¸»çº¿ç¨‹ä¸ä¸€æ ·ï¼ŒåŒºåˆ«æ˜¯
    1. æ— æ³•è¯»å–ä¸»çº¿ç¨‹æ‰€åœ¨çš„ç½‘é¡µ DOM å¯¹è±¡
    2. æ— æ³•ä½¿ç”¨ document ã€window ã€parent è¿™äº›å¯¹è±¡

    Worker çº¿ç¨‹å’Œä¸»çº¿ç¨‹ä¸åœ¨åŒä¸€ä¸ªç¯å¢ƒï¼Œä»–ä»¬ä¸èƒ½ç›´æ¥é€šä¿¡ï¼Œå¿…é¡»é€šè¿‡æ¶ˆæ¯å®Œæˆ `postMessage` å’Œ `onMessage`


### è„šæœ¬é™åˆ¶

Worker çº¿ç¨‹ä¸èƒ½ä½¿ç”¨ alert() å’Œ confirm() æ–¹æ³• ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ ajax å’Œå®šæ—¶å™¨ setTimeout ç­‰ API

## åŸºæœ¬ä½¿ç”¨

åˆ›å»ºçº¿ç¨‹   

``` bash
const worker = new Worker(aURL, options);
```

`worker.postMessage` å‘ worker å†…éƒ¨ä½œç”¨åŸŸå‘é€ä¸€å…±æ¶ˆæ¯ï¼Œæ¶ˆæ¯å¯ä»¥ç”±JavaScriptä»»ä½•å¯¹è±¡ç»„æˆ

`worker.terminate`  ç«‹åˆ»ç»ˆæ­¢workerã€‚è¯¥æ–¹æ³•å¹¶ä¸ä¼šç­‰å¾…wokerå»å®Œæˆå‰©ä½™çš„æ“ä½œï¼Œä¼šç«‹é©¬åœæ­¢

`worker.onmessage` æ¥æ”¶åˆ°æ¶ˆæ¯ä¼šç«‹é©¬è§¦å‘messageæ¶ˆæ¯

`worker.onerror` å½“workerå‡ºç°è¿è¡Œä¸­é”™è¯¯æ—¶ã€‚ä¼šè¢«è°ƒç”¨


``` bash

worker.addEventListener(&#39;error&#39;, function (e) {
    console.log(e.message) // å¯è¯»æ€§è‰¯å¥½çš„é”™è¯¯æ¶ˆæ¯
    console.log(e.filename) // å‘ç”Ÿé”™è¯¯çš„è„šæœ¬æ–‡ä»¶å
    console.log(e.lineno) // å‘ç”Ÿé”™è¯¯æ—¶æ‰€åœ¨è„šæœ¬æ–‡ä»¶çš„è¡Œå·
})

```

## å¤šæ•°ä½¿ç”¨åœºæ™¯
```
    - æ‰“åŒ…å‹ç¼© å¦å¤–å¼€è¾Ÿçº¿ç¨‹å»å¤„ç†
    - å¯¼å‡ºå›¾ç‰‡å¤ªå¤§ å¦å¤–å¼€è¾Ÿçº¿ç¨‹å»å¤„ç†
    - å‹ç¼©å›¾ç‰‡ç­‰ç­‰
    ....
```


ç›¸å…³æ–‡æ¡£

[MDN - Web Workers API](https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Workers_API/Using_web_workers)
   </div></div></div></div></a></div><div class="mx-4"><a href="/blog/2023-08-30-csssvhdvh/doc/index.html" title="cssæ–°å•ä½dvhï¼Œsvh è§£é‡Š"><div class="card bg-color cursor-pointer	 postCard rounded-lg w-full mb-4 shadow-xl flex relative hover:shadow-md transition ease-in-out delay duration-300 hover:scale-95"><div class="flex"><div class="w-full p-4"><div class="flex justify-between"><div></div><div class="flex tools"><div class="text-sm mr-6"><time datetime="Wed Aug 30 2023 23:27:24 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">2023/8/30</time></div><div class="text-sm mr-6">0.1Kå­—</div><div class="text-sm">354 å¤©å‰</div></div></div><div class="flex justify-between items-center mt-2"><div class="w-5/6"><div class="text-2xl font-medium title line-clamp-1 leading-relaxed">cssæ–°å•ä½dvhï¼Œsvh è§£é‡Š</div></div><div class="text-sm text-gray-500">æ—¥å¸¸ç”Ÿæ´»</div></div><div class="text-sm text-gray-500 mt-3 line-clamp-4 leading-relaxed"> 
## ä»€ä¹ˆæ˜¯vhï¼Œvw

åœ¨cssä¸­ `vh` è¡¨ç¤ºçª—å£è§†å›¾çš„é«˜åº¦ç™¾åˆ†æ¯”,  `vw` è¡¨ç¤ºçª—å£è§†å›¾çš„å®½åº¦åº¦ç™¾åˆ†æ¯” , `1vh` ç­‰äºçª—å£è§†å›¾é«˜åº¦ `1%`ï¼Œè€Œ`1vw` ä»£è¡¨è§†å›¾å®½åº¦çš„`1%` ï¼Œä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨ `100vh` æ¥è‡ªå®šä¹‰æˆ‘ä»¬çš„è§†å›¾å¤§å°çš„é«˜åº¦ï¼Œå›ºå®šä¸º100%ï¼Œä»–å¯¹å“åº”å¼æ˜¯éå¸¸é€‚ç”¨ï¼Œå› ä¸ºä»–ä¼šæ ¹æ®çª—å£çš„å¤§å°è‡ªåŠ¨é€‚åº”å°ºå¯¸ã€‚

![åˆ‡å›¾1](http://img.blog.loli.wang/2023-08-30-cssSvhDvh/01.png)

### é‡è§é—®é¢˜

å‘ç°æ–°é¡¹ç›®æ¨¡æ¿å¹³æ¿ä¸Šä¼šå‡ºç°ç™½å±æº¢å‡ºå‡ºç°æ»šåŠ¨æ¡ï¼ï¼ï¼**ä¸æ­¢æ˜¯é«˜åº¦ï¼Œå®½åº¦ä¹Ÿæ˜¯è¿™æ · ä¼šå‡ºç°ä¸€å®šçš„é—®é¢˜**

![åˆ‡å›¾2](http://img.blog.loli.wang/2023-08-30-cssSvhDvh/02.png)

### è§£å†³æ–¹æ¡ˆ

ä¸ºäº†è§£å†³è¿™ä¸ªæ–¹æ¡ˆå‡ºç°äº†æ–°çš„å•ä½ `dvh` `svh`, ä»–ä»¬åœ¨ç§»åŠ¨ç«¯å…¼å®¹ä¸Šé¢ä¼šç»å¸¸ç”¨åˆ°ã€‚ä¹Ÿä¼šå¯¹ç§»åŠ¨ç«¯è¿›è¡Œä¸€å®šçš„å…¼å®¹


å‚è€ƒ:
[MDN - CSS](https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/101)
   </div></div><div><img src="http://img.blog.loli.wang/2023-08-30-cssSvhDvh/03.png" class="w-[500px] h-[200px] rounded-r-lg object-cover" style="clip-path:polygon(0 0,100% 0,100% 100%,20% 100%)"></div></div></div></a></div><div class="mx-4"><a href="/blog/2023-8-28-nodeclitools/doc/index.html" title="ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„ Cli è„šæ‰‹æ¶å·¥å…·"><div class="card bg-color postCard mb-4 rounded-lg w-full shadow-xl cursor-pointer	 flex relative hover:shadow-md transition ease-in-out delay duration-300 hover:scale-95"><div class="flex"><div><img src="http://img.blog.loli.wang/2023-8-28-nodeCliTools/03.png" class="w-[500px] h-[200px] rounded-l-lg" style="clip-path:polygon(0 0,88% 0,100% 100%,0 100%)"></div><div class="w-full p-4"><div class="flex justify-between"><div></div><div class="flex tools"><div class="text-sm mr-6"> <time datetime="Mon Aug 28 2023 21:22:24 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">2023/8/28</time> </div><div class="text-sm mr-6">0.6Kå­—</div><div class="text-sm">356 å¤©å‰</div></div></div><div class="flex justify-between items-center mt-2"><div><div class="text-2xl font-medium title">ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„ Cli è„šæ‰‹æ¶å·¥å…·</div></div><div class="text-sm text-gray-500">æ—¥å¸¸ç”Ÿæ´»</div></div><div class="text-sm text-gray-500 mt-3 line-clamp-4 leading-relaxed">
å…·ä½“å®Œæ•´ä»£ç å¯ä»¥å»æŸ¥çœ‹æˆ‘çš„githubé¡¹ç›®ï¼Œ[mw-cli - ä¸€ä¸ªNodejsè„šæ‰‹æ¶å·¥å…·](https://github.com/itmowang/mw-cli)

## æˆ˜æ–—å‡†å¤‡

å»ºç«‹ä¸€ä¸ªé¡¹ç›®æ–‡ä»¶ **æ‰“å¼€å‘½ä»¤çª—å£** æˆ‘ä»¬æ‰€ä½¿ç”¨çš„ä¸€åˆ‡ä¸ºpnpm 

``` bash
npm install pnpm -g

# åˆå§‹åŒ–é¡¹ç›®æŒ‡ä»¤
pnpm init

# å®‰è£…æˆ‘ä»¬æ‰€éœ€è¦ä¼šç”¨åˆ°çš„ä¾èµ– ä½œç”¨å»æŸ¥å»æŸ¥é˜…ä¸‹å§ï¼
pnpm add typescript  // Typescript æ”¯æŒ ğŸ’• ä¸ªäººä¹ æƒ¯
pnpm add commander  
pnpm add copy-dir
pnpm add cross-spawn
pnpm add fs
pnpm add kolorist
pnpm add minimist
pnpm add ora
pnpm add ts-node

# ç”Ÿæˆtsé…ç½®æ–‡ä»¶ tsconfig.json
tsc --init

```

## å¯åŠ¨æ–‡ä»¶   

åˆ›å»º**bin**ç›®å½•ä½œä¸ºå¯åŠ¨è·¯å¾„ï¼Œåˆ›å»ºindex.tsæ–‡ä»¶ï¼Œæ³¨æ„ **#!/usr/bin/env** æ˜¯ä¸€ä¸ªå¸¸è§çš„çº¦å®šï¼Œç”¨äºå‘Šè¯‰æ“ä½œç³»ç»Ÿåœ¨è¿è¡Œè„šæœ¬æ—¶ä½¿ç”¨æŒ‡å®šçš„è§£é‡Šå™¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ/usr/bin/env æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå®ƒä¼šåœ¨ç¯å¢ƒå˜é‡ä¸­æŸ¥æ‰¾æŒ‡å®šçš„è§£é‡Šå™¨ï¼ˆåœ¨è¿™é‡Œæ˜¯ nodeï¼‰ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥æ‰§è¡Œè„šæœ¬ã€‚

``` bash
# /bin/index.ts

#!/usr/bin/env node

// å¼•ç”¨cross-spawn
const spawn = require(&quot;cross-spawn&quot;);

// è°ƒç”¨pkgjson
const pkg = require(&quot;../../package.json&quot;);

// å¼•ç”¨commander
const program = require(&quot;commander&quot;);

// å¼•ç”¨åˆ›å»ºé¡¹ç›®é€»è¾‘
const createProject = require(&quot;../src/core/create&quot;);

//ç‰ˆæœ¬å· -v --version é€‰é¡¹
program.version(pkg.version, &#39;-v,--version&#39;)

// åˆ›å»ºé¡¹ç›®
program.command(&quot;create &lt;projectName&gt;&quot;).description(&quot;åˆ›å»ºé¡¹ç›®&quot;).action((projectName: string) =&gt; {
    createProject(projectName);
});

program.parse(process.argv);

```

## åˆ›å»ºé¡¹ç›®é…ç½®æ–‡ä»¶

å»ºç«‹**src**ç›®å½•,åˆ›å»º**config**ç›®å½•å’Œ**core**ç›®å½•ï¼Œconfig æ–‡ä»¶å¤¹æˆ‘ä»¬ç”¨äºå­˜æ”¾é…ç½®æ–‡ä»¶ï¼Œcore æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾æ ¸å¿ƒé€»è¾‘æ–‡ä»¶ã€‚

config æ–‡ä»¶å¤¹å†…å»ºç«‹ repo.config.ts , ç”¨äºå­˜æ”¾æˆ‘ä»¬é¡¹ç›®æ¨¡æ¿åœ°å€ï¼ŒåŸæœ¬æœ‰è€ƒè™‘æ˜¯ç”¨githubçš„é¡¹ç›®åœ°å€çš„ï¼Œä½†æ˜¯ä¸ªäººè®¤ä¸ºå¹¶ä¸é€‚åˆã€‚
    
``` bash
# /src/config/repo.config.ts

const path = require(&quot;path&quot;);

// æ¨¡æ¿åœ°å€
const repoUrl =  path.resolve(__dirname, &quot;../../template&quot;);

module.exports = repoUrl;

```

å¹¶ä¸”åˆ›å»º **template** ç›®å½•,å­˜æ”¾æˆ‘ä»¬é¡¹ç›®æ¨¡æ¿

![åˆ‡å›¾1](http://img.blog.loli.wang/2023-8-28-nodeCliTools/01.png)


## åˆ›å»ºæ¨¡æ¿é€»è¾‘

``` bash
# /src/core/create.ts 

// è¯»å–vueæ¨¡ç‰ˆ
const vueCommand = require(&quot;./vueCreate&quot;);
// è¯»å–nodeæ¨¡ç‰ˆ
const nodeCommand = require(&quot;./nodeCreate&quot;);

const createCommand = async (projectName = &quot;&quot;) =&gt; {
  const {
    blue,
    cyan,
    green,
    lightBlue,
    lightGreen,
    lightRed,
  } = require(&quot;kolorist&quot;);

  const prompts = require(&quot;prompts&quot;);

  const questions = [
    {
      type: &quot;text&quot;,
      name: &quot;projectName&quot;,
      message: &quot;è¯·è¾“å…¥ä½ éœ€è¦åˆ›å»ºçš„é¡¹ç›®åç§°&quot;,
      initial: projectName,
    },
    {
      type: &quot;text&quot;,
      name: &quot;projectVersion&quot;,
      message: &quot;è¯·è¾“å…¥ä½ éœ€è¦åˆ›å»ºçš„é¡¹ç›®ç‰ˆæœ¬å·&quot;,
      initial: &quot;1.0.0&quot;,
    },
    {
      type: &quot;select&quot;,
      name: &quot;projectTemplate&quot;,
      message: &quot;è¯·é€‰æ‹©ä½ éœ€è¦åˆ›å»ºçš„é¡¹ç›®æ¨¡æ¿&quot;,
      choices: [
        {
          title: &quot;Vue&quot;,
          value: &quot;vue&quot;,
          description: blue(&quot;vueç±»å‹çš„ä¸€äº›é¡¹ç›®æ¨¡ç‰ˆ&quot;),
        },
        {
          title: &quot;React&quot;,
          value: &quot;react&quot;,
          description: blue(&quot;reactç±»å‹çš„ä¸€äº›é¡¹ç›®æ¨¡ç‰ˆ&quot;),
        },
        {
          title: &quot;Node&quot;,
          value: &quot;node&quot;,
          description: blue(&quot;nodeç±»å‹çš„ä¸€äº›é¡¹ç›®æ¨¡,ä¾‹å¦‚é…ç½®å¥½mysqlæˆ–è€…ormæ¡†æ¶&quot;),
        },
      ],
    },
  ];

  (async () =&gt; {
    const response = await prompts(questions);
    const { projectName, projectVersion, projectTemplate } = response;
    if (projectTemplate === &quot;vue&quot;) {
      vueCommand(response);
    } else if (projectTemplate === &quot;node&quot;) {
      nodeCommand(response);
    } else {
      console.log(lightRed(&quot;æš‚æ—¶åªæ”¯æŒvueæ¨¡ç‰ˆ&quot;));
    }
  })();
};

module.exports = createCommand;
```

## åˆ›å»ºvueæ¨¡æ¿é€»è¾‘

``` bash
# /src/core/vueCreate.ts 

interface Create {
  projectName: string; // é¡¹ç›®åç§°
  projectVersion: string; // é¡¹ç›®ç‰ˆæœ¬å·
  projectTemplate: string; // é¡¹ç›®æ¨¡ç‰ˆ
}

// è¯»å–vueæ¨¡ç‰ˆ
const vueCreate = async (create: Create) =&gt; {
  const prompts = require(&quot;prompts&quot;);
  const config = require(&quot;../config/repo.config&quot;);
  const {
    blue,
    cyan,
    green,
    lightBlue,
    lightGreen,
    lightRed,
  } = require(&quot;kolorist&quot;);

  const questions = [
    {
      type: &quot;select&quot;,
      name: &quot;vueTemplate&quot;,
      message: &quot;è¯·é€‰æ‹©ä½ éœ€è¦åˆ›å»ºçš„é¡¹ç›®æ¨¡æ¿&quot;,
      choices: [
        {
          title: &quot;template-vue3-ts-vite&quot;,
          value: &quot;template-vue3-ts-vite&quot;,
          description: green(&quot;vue3 + ts + vite é¡¹ç›®æ¨¡ç‰ˆ&quot;),
        },
        {
          title: &quot;template-vue3-webpack-ts&quot;,
          value: &quot;template-vue3-webpack-ts&quot;,
          description: green(&quot;vue3 + ts + webpack é¡¹ç›®æ¨¡ç‰ˆ&quot;),
        },
      ],
    },
  ];

  (async () =&gt; {
    const response = await prompts(questions);
    const { vueTemplate } = response;
    // èµ°copy-dir ä¸èµ°githubäº† æ²¡æ„ä¹‰
    const copydir = require(&quot;copy-dir&quot;);
    // è¿›åº¦
    const ora = require(&quot;ora&quot;);
    const spinner = ora(blue(&quot;ä¸‹è½½æ¨¡ç‰ˆä¸­...&quot;));

    copydir.sync(
      `${config}/${vueTemplate}`,
      `./${create.projectName}`,
      {
        utimes: true, // keep add time and modify time
        mode: true, // keep file mode
        cover: true, // cover file when exists, default is true
        filter: function (stat: string, filepath: any, filename: string) {
          return true; // remind to return a true value when file check passed.
        },
      },
      function (err: Error) {
        if (err) throw err;
        spinner.fail(lightRed(`é¡¹ç›®æ¨¡ç‰ˆåˆ›å»ºå¤±è´¥`));
      }
    );

    spinner.succeed(lightGreen(&quot;é¡¹ç›®æ¨¡ç‰ˆåˆ›å»ºæˆåŠŸ&quot;));
  })();
};

module.exports = vueCreate;

```

ä»è¿™é‡Œæ•´ä½“é€»è¾‘å°±å·²ç»ç¼–å†™å®Œäº† ä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦åœ¨package.jsonä¸­é…ç½®ä¸€ä¸‹,å¹¶ä¸”ä¿®æ”¹ä¸‹tsconfig.json

``` bash
# tsconfig.json
# ...
 &quot;outDir&quot;: &quot;lib&quot;
# ...
```

ä¿®æ”¹è¾“å‡ºç›®å½•ä¸ºlib , è¿™æ ·æˆ‘ä»¬ä½¿ç”¨tscå‘½ä»¤ç¼–è¯‘åçš„æ–‡ä»¶å°±ä¼šè¾“å‡ºåˆ°libç›®å½•ä¸‹

``` bash
{
  &quot;name&quot;: &quot;mw-create&quot;,
  &quot;version&quot;: &quot;1.0.14&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;./lib/bin/index.js&quot;,
  &quot;bin&quot;: {
    &quot;mwcli&quot;: &quot;./lib/bin/index.js&quot;
  },
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;ts-node ./bin/index&quot;,
    &quot;build&quot;: &quot;node ./bin/copyDir.ts &amp;&amp; tsc&quot;,
    &quot;minor&quot;: &quot;npm version minor&quot;,
    &quot;major&quot;: &quot;npm version major&quot;,
    &quot;patch&quot;: &quot;npm version patch&quot;
  },
  &quot;publishConfig&quot;: {
    &quot;access&quot;: &quot;public&quot;
  },
  &quot;repository&quot;: {
    &quot;type&quot;: &quot;git&quot;,
    &quot;url&quot;: &quot;git+https://github.com/itmowang/mw-cli.git&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;MIT&quot;,
  &quot;devDependencies&quot;: {
    &quot;@types/node&quot;: &quot;^20.4.9&quot;
  },
  &quot;dependencies&quot;: {
    &quot;commander&quot;: &quot;^11.0.0&quot;,
    &quot;copy-dir&quot;: &quot;^1.3.0&quot;,
    &quot;cross-spawn&quot;: &quot;^7.0.3&quot;,
    &quot;download-git-repo&quot;: &quot;^3.0.2&quot;,
    &quot;fs&quot;: &quot;0.0.1-security&quot;,
    &quot;kolorist&quot;: &quot;^1.8.0&quot;,
    &quot;minimist&quot;: &quot;^1.2.8&quot;,
    &quot;ora&quot;: &quot;5.4.1&quot;,
    &quot;prompts&quot;: &quot;^2.4.2&quot;,
    &quot;ts-node&quot;: &quot;^10.9.1&quot;
  }
}

```
è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯  &quot;main&quot;: &quot;./lib/bin/index.js&quot;, mainå­—æ®µæŒ‡å®šäº†ç¨‹åºçš„ä¸»å…¥å£æ–‡ä»¶ï¼Œbinå­—æ®µæŒ‡å®šäº†ç¨‹åºçš„å‘½ä»¤åï¼Œnpmä¼šåœ¨å…¨å±€ç¯å¢ƒä¸‹å»ºç«‹ä¸€ä¸ªè½¯é“¾æ¥ï¼ŒæŒ‡å‘æˆ‘ä»¬çš„ä¸»å…¥å£æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨mwcliå‘½ä»¤äº†ã€‚

## æµ‹è¯•ä¸€ä¸‹

``` bash

npm link

mwcli create test

```

![åˆ‡å›¾1](http://img.blog.loli.wang/2023-8-28-nodeCliTools/02.png)

ä¸€åˆ‡å¤§åŠŸå‘Šæˆ    


å…·ä½“ä»£ç å‚è€ƒgithubä»“åº“ https://github.com/itmowang/mw-cli</div></div></div></div></a></div><div class="mx-4"><a href="/blog/2023-8-27-reflect/doc/index.html" title="JavaScript-å†…ç½®å¯¹è±¡-Reflect"><div class="card bg-color cursor-pointer	 postCard rounded-lg w-full mb-4 shadow-xl flex relative hover:shadow-md transition ease-in-out delay duration-300 hover:scale-95"><div class="flex"><div class="w-full p-4"><div class="flex justify-between"><div></div><div class="flex tools"><div class="text-sm mr-6"><time datetime="Thu Aug 24 2023 22:31:24 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">2023/8/24</time></div><div class="text-sm mr-6">0.3Kå­—</div><div class="text-sm">360 å¤©å‰</div></div></div><div class="flex justify-between items-center mt-2"><div class="w-5/6"><div class="text-2xl font-medium title line-clamp-1 leading-relaxed">JavaScript-å†…ç½®å¯¹è±¡-Reflect</div></div><div class="text-sm text-gray-500">æ—¥å¸¸ç”Ÿæ´»</div></div><div class="text-sm text-gray-500 mt-3 line-clamp-4 leading-relaxed"> 
## Reflect
Reflect æ˜¯ä¸€ä¸ª**å†…ç½®çš„å¯¹è±¡**ï¼Œä»–æä¾›äº†ä¸€äº›æ–¹æ³•æ¥ **æ“ä½œå¯¹è±¡** çš„å±æ€§å’Œæ–¹æ³•ï¼Œ å¹¶ä¸”å®ƒè¿˜æä¾› **æ‹¦æˆª JavaScript æ“ä½œ** çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä¸ proxy handler (en-US) çš„æ–¹æ³•ç›¸åŒã€‚Reflect ä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå› æ­¤å®ƒæ˜¯ä¸å¯æ„é€ çš„ã€‚


#### Reflect.get(target, propertyKey[, receiver]) è·å–å¯¹è±¡çš„å±æ€§å€¼

``` bash

    const obj = {name:&#39;Mowang&#39;,age:20}

    console.log(Reflect.get(obj,&#39;name&#39;)) // è¾“å‡º Mowang

```

#### Reflect.set(target, propertyKey, value[, receiver]) è®¾ç½®å¯¹è±¡çš„å±æ€§å€¼

``` bash
    const obj = {name:&#39;Mowang&#39;,age:20}
    
    Reflect.set(obj,&#39;age&#39;,22)

    console.log(obj[&#39;age&#39;]) // è¾“å‡º 22
```

#### Reflect.has(target, propertyKey) åˆ¤æ–­å¯¹è±¡æ˜¯å¦å…·æœ‰æŒ‡å®šçš„å±æ€§

``` bash
    const obj = {name:&#39;Mowang&#39;,age:20}
    
    const hasName = Reflect.has(obj,&#39;name&#39;)

    console.log(hasName) // è¾“å‡º true

```

#### Reflect.deleteProperty(target, propertyKey) åˆ é™¤å¯¹è±¡çš„å±æ€§

``` bash
    const obj = {name:&#39;Mowang&#39;,age:20}
    
    Reflect.deleteProperty(obj,&#39;age&#39;)

    console.log(obj) // è¾“å‡º { name:&#39;Mowang&#39; }

```

#### Reflect.construct(target, argumentsList[, newTarget]) ä½¿ç”¨ç»™å®šçš„å‚æ•°åˆ—è¡¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹

``` bash 
    class Person {
        constructor(name,age){
            this.name = name;
            this.age = age
        }
    }

    const args = [&#39;Mowang&#39;,20];
    const person = Reflect.construct(Person,args)
    
    console.log(person) // è¾“å‡º {name:&#39;Mowang&#39;,age:20}

```


è¿™åªæ˜¯ä»–çš„å¸¸ç”¨æ–¹æ³•ï¼Œä»–è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å‡½æ•°
``` bash
    - Reflect.apply(target, thisArgument, argumentsList)  # é€šè¿‡æŒ‡å®šçš„å‚æ•°åˆ—è¡¨å‘èµ·å¯¹ç›®æ ‡ (target) å‡½æ•°çš„è°ƒç”¨
    - Reflect.get(target, propertyKey[, receiver]) # ä»å·²æœ‰çš„å¯¹è±¡ç§è¯»å–å»å±æ€§å€¼
    - Reflect.has(target, propertyKey) # åˆ¤æ–­ç›®æ ‡å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªå±æ€§
    - Reflect.set(target, propertyKey, value[, receiver]) # ä¿®æ”¹æˆ–è€…è®¾ç½®ä¸€ä¸ªå±æ€§
    - Reflect.isExtensible(target) # åˆ¤æ–­è¿™ä¸ªå¯¹è±¡æ˜¯å¦å¯æ‹“å±• å¦‚æœå¯ä»¥æ‹“å±•æˆ‘ä»¬å°±å¯ä»¥å¢åŠ æ–°å±æ€§ ï¼Œæ¯”å¦‚ Reflect || Object.preventExtensions(target) è®¾ç½®è¿‡çš„å±æ€§å°±æ˜¯ä¸å¯æ‹“å±•çš„
    - Reflect.ownKeys(target) # è¿”å›ä¸€ä¸ªä»¥ç›®æ ‡å±æ€§é”®å€¼çš„æ•°ç»„ æ¯”å¦‚ const obj = {name:&#39;Mowang&#39;, age:20 }  Reflect.ownKeys(obj) è¿”å›ç»“æœä¸º [&#39;name&#39;,&#39;age&#39;]
    ...
    // ä¸¾å‡ ä¸ªå¸¸ç”¨çš„ , å‰©ä¸‹çš„é˜…è¯»MDN https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect
```

Reflect æ˜¯ä¸€ä¸ªå†…ç½®çš„ JS å¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå¯ä»¥è®©å¼€å‘è€…é€šè¿‡è°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œè®¿é—®ä¸€äº› JS åº•å±‚åŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ**ä» Reflect å¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•**


#### é…åˆ proxy ä½¿ç”¨

``` bash
let p = {
    a: &#39;a&#39;
};

let handler = {
  set(target, key, value, receiver) {
    console.log(&#39;set&#39;);
    Reflect.set(target, key, value, receiver)
  },
  defineProperty(target, key, attribute) {
    console.log(&#39;defineProperty&#39;);
    Reflect.defineProperty(target, key, attribute);
  }
};

let obj = new Proxy(p, handler);
obj.a = &#39;A&#39;;
// set
// defineProperty

```

å¦‚æœ Proxy å¯¹è±¡å’Œ Reflect å¯¹è±¡è”åˆä½¿ç”¨ï¼Œå‰è€…**æ‹¦æˆªèµ‹å€¼**æ“ä½œï¼Œåè€…å®Œæˆ**èµ‹å€¼çš„é»˜è®¤è¡Œä¸º**ï¼Œè€Œä¸”ä¼ å…¥äº† **receiver**ï¼Œé‚£ä¹ˆ **Reflect.set ä¼šè§¦å‘ Proxy.defineProperty æ‹¦æˆª**ã€‚


å‚è€ƒæ–‡æ¡£  [MDN - Reflect](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect)
</div></div><div><img src="http://img.blog.loli.wang/2023-8-27-Reflect/01.png" class="w-[500px] h-[200px] rounded-r-lg object-cover" style="clip-path:polygon(0 0,100% 0,100% 100%,20% 100%)"></div></div></div></a></div><div class="mx-4"><a href="/blog/2023-9-01-astro/doc/index.html" title="æœ¬ç«™ä¸»é¢˜ - å¾…æ›´æ–°"><div class="card bg-color postCard mb-4 rounded-lg w-full shadow-xl cursor-pointer	 flex relative hover:shadow-md transition ease-in-out delay duration-300 hover:scale-95"><div class="flex"><div><img src="http://img.blog.loli.wang/2023-9-01-AsTro/01.png" class="w-[500px] h-[200px] rounded-l-lg" style="clip-path:polygon(0 0,88% 0,100% 100%,0 100%)"></div><div class="w-full p-4"><div class="flex justify-between"><div></div><div class="flex tools"><div class="text-sm mr-6"> <time datetime="Sun Jul 30 2023 23:27:24 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">2023/7/30</time> </div><div class="text-sm mr-6">0.0Kå­—</div><div class="text-sm">385 å¤©å‰</div></div></div><div class="flex justify-between items-center mt-2"><div><div class="text-2xl font-medium title">æœ¬ç«™ä¸»é¢˜ - å¾…æ›´æ–°</div></div><div class="text-sm text-gray-500">æ—¥å¸¸ç”Ÿæ´»</div></div><div class="text-sm text-gray-500 mt-3 line-clamp-4 leading-relaxed">

![åˆ‡å›¾1](http://img.blog.loli.wang/2023-9-01-AsTro/02.png)

![åˆ‡å›¾2](http://img.blog.loli.wang/2023-9-01-AsTro/03.png)

![åˆ‡å›¾3](http://img.blog.loli.wang/2023-9-01-AsTro/04.png)


</div></div></div></div></a></div><div class="mx-4"><a href="/blog/2023-8-23-beyondcompare/doc/index.html" title="[å·¥å…·] ä»£ç æ–‡æœ¬æ¯”å¯¹ç¥å™¨ Beyond Compare"><div class="card bg-color cursor-pointer	 postCard rounded-lg w-full mb-4 shadow-xl flex relative hover:shadow-md transition ease-in-out delay duration-300 hover:scale-95"><div class="flex"><div class="w-full p-4"><div class="flex justify-between"><div></div><div class="flex tools"><div class="text-sm mr-6"><time datetime="Fri Jul 21 2023 00:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">2023/7/21</time></div><div class="text-sm mr-6">0.0Kå­—</div><div class="text-sm">395 å¤©å‰</div></div></div><div class="flex justify-between items-center mt-2"><div class="w-5/6"><div class="text-2xl font-medium title line-clamp-1 leading-relaxed">[å·¥å…·] ä»£ç æ–‡æœ¬æ¯”å¯¹ç¥å™¨ Beyond Compare</div></div><div class="text-sm text-gray-500">æ—¥å¸¸ç”Ÿæ´»</div></div><div class="text-sm text-gray-500 mt-3 line-clamp-4 leading-relaxed"> 
###  èµ·å› 

æ²‰å†°Aæ¢¦å†™äº†ä¸ªæ–°çš„ä¸»é¢˜ï¼Œä¹Ÿå°±æ˜¯æœ¬åšå®¢çš„ä¸»é¢˜ï¼Œåœ¨ä½¿ç”¨ä¸­å‘ç”Ÿäº†å¾ˆå¤šåŠŸèƒ½ç¼ºå¤±çš„é—®é¢˜ï¼Œå¾€å¾€ä»ä¸€ä¸ª **demo** æ”¹ä¸ºä¸€ä¸ªçœŸæ­£å¯ç”¨å®Œæ•´çš„ä¸œè¥¿çš„æ—¶å€™ï¼Œå°‘ä¸äº†æŠ˜è…¾ï¼Œè€Œæˆ‘å’Œæ²‰å†°ä¸æ˜¯ç”¨çš„ä¸€ä¸ªä»£ç ä»“åº“å¯¼è‡´æ— æ³•ä»£ç ç›´æ¥åˆå¹¶æŸ¥çœ‹å·®å¼‚ ï¼Œè€Œæˆ‘åˆéœ€è¦ä½¿ç”¨æ–°åŠŸèƒ½ï¼Œå› æ­¤æ²‰å†°Aæ¢¦æ¨èäº†ä¸€ä¸ªå·¥å…· ã€ŠBeyond Compareã€‹

![BeyondCompare](http://img.blog.loli.wang/2023-8-23-BeyondCompare/03.png)

### æ•ˆæœä½“éªŒæä½³ 

![åˆ‡å›¾1](http://img.blog.loli.wang/2023-8-23-BeyondCompare/01.png)
![åˆ‡å›¾2](http://img.blog.loli.wang/2023-8-23-BeyondCompare/02.png)

### ä¸‹è½½åœ°å€

 https://www.scootersoftware.com/home  ï¼ˆè¿™ä¸ªåº”è¯¥æ˜¯å®˜æ–¹ä¸‹è½½ï¼Œä¸­æ–‡ç«™è²Œä¼¼æ˜¯ä»£ç†çš„ï¼‰</div></div><div><img src="http://img.blog.loli.wang/2023-8-23-BeyondCompare/03.png" class="w-[500px] h-[200px] rounded-r-lg object-cover" style="clip-path:polygon(0 0,100% 0,100% 100%,20% 100%)"></div></div></div></a></div><div class="mx-4"><a href="/blog/2023-8-22-eventloop/doc/index.html" title="JS å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ "><div class="card bg-color postCard mb-4 rounded-lg w-full shadow-xl cursor-pointer	 flex relative hover:shadow-md transition ease-in-out delay duration-300 hover:scale-95"><div class="flex"><div><img src="http://img.blog.loli.wang/2023-8-22-EventLoop/01.awebp" class="w-[500px] h-[200px] rounded-l-lg" style="clip-path:polygon(0 0,88% 0,100% 100%,0 100%)"></div><div class="w-full p-4"><div class="flex justify-between"><div></div><div class="flex tools"><div class="text-sm mr-6"> <time datetime="Sun Jul 02 2023 00:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">2023/7/2</time> </div><div class="text-sm mr-6">0.0Kå­—</div><div class="text-sm">414 å¤©å‰</div></div></div><div class="flex justify-between items-center mt-2"><div><div class="text-2xl font-medium title">JS å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ </div></div><div class="text-sm text-gray-500">æ—¥å¸¸ç”Ÿæ´»</div></div><div class="text-sm text-gray-500 mt-3 line-clamp-4 leading-relaxed">
### JS æ˜¯å•çº¿ç¨‹

js ç‰¹æ€§å•çº¿ç¨‹ï¼Œjs æ˜¯ä¸»è¦å’Œç”¨æˆ·äº’åŠ¨ï¼Œå’Œæ“ä½œ DOMï¼Œå†³å®šäº†ä»–åªèƒ½æ˜¯ä¸ªå•çº¿ç¨‹ï¼Œå¦åˆ™ä¼šå‡ºç°å¾ˆå¤æ‚çš„åŒæ­¥é—®é¢˜ ã€‚ å•çº¿ç¨‹å°±æ„å‘³ç€ï¼Œæ‰€æœ‰ä»»åŠ¡å¿…é¡»è¦æ’é˜Ÿæ‰§è¡Œï¼Œåªæœ‰æ‰§è¡Œå®Œå‰é¢çš„ï¼Œåé¢çš„æ‰ä¼šæ‰§è¡Œï¼Œ å¦‚æœå‰ä¸€ä¸ªä»»åŠ¡æ¶ˆè€—æ—¶é—´å¾ˆé•¿ï¼Œ **åé¢çš„ä»»åŠ¡å°±å¿…é¡»ç­‰å¾…å‰é¢çš„ä»»åŠ¡ç­‰ç€**ã€‚

### JS ä¸­çš„åŒæ­¥å¼‚æ­¥

åŒæ­¥

    å¿…é¡»è¦ä»ä¸Šè‡³ä¸‹æ‰§è¡Œå®Œæ¯•ï¼Œåä¸€ä¸ªä»»åŠ¡å¿…é¡»è¦ç­‰å¾…ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•

å¼‚æ­¥

    å‰ä¸€ä¸ªä»»åŠ¡æ²¡æœ‰æ‰§è¡Œå®Œï¼Œ æ²¡æœ‰å…³ç³» ï¼Œ ä»–ä¹Ÿä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œç›´åˆ°æ‰§è¡Œç»“æŸ


### å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡

    å¯¹åŒæ­¥å¼‚æ­¥æœ‰ä¸€å®šçš„åˆ’åˆ†åï¼Œ å·²ç»çŸ¥é“åŒæ­¥ä»»åŠ¡æ˜¯æŒ‰é¡ºåºæ‰§è¡Œï¼Œä»ä¸Šè‡³ä¸‹ã€‚
é‚£ä¹ˆå¼‚æ­¥ä»»åŠ¡ä¹Ÿæœ‰ä»–çš„æ‰§è¡Œé¡ºåºçš„ï¼Œ ä»–ä¹Ÿæ˜¯ä»ä¸Šè‡³ä¸‹ï¼Œ ä½†æ˜¯åœ¨å¼‚æ­¥ä»»åŠ¡é‡Œï¼Œè¿˜æœ‰è¿›ä¸€å±‚çš„åˆ’åˆ†ï¼Œå°±æ˜¯å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ï¼Œ**[å¾®ä»»åŠ¡æ¯”å®ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œ]**

#### å¾®ä»»åŠ¡ä»£è¡¨
    process.nextTickã€ Promiseã€ MutationObserver ç­‰


#### å®ä»»åŠ¡ä»£è¡¨
    setTimeoutã€ setIntervalã€ setImmediateã€ IOæ“ä½œç­‰

æ³¨æ„ï¼š Promiseæœ‰ä¸ªç‰¹æ®Šæ€§ï¼Œ**Promiseæ„é€ å‡½æ•°ä¸­å‡½æ•°ä½“çš„ä»£ç éƒ½æ˜¯ç«‹å³æ‰§è¡Œçš„**ï¼Œè€ŒPromise.then() å’Œ Promise.catch() å±äºå¾®ä»»åŠ¡ï¼Œ ä¹Ÿå°±æ˜¯resolve() å’Œreject()

![æ˜é‡‘è¡¥å›¾](http://img.blog.loli.wang/2023-8-22-EventLoop/01.awebp)


#### å‚è€ƒèµ„æ–™

æ˜é‡‘-è¾‰å¤œçœŸæ˜¯å¤ªå¯çˆ±äº†  https://juejin.cn/post/6886602875225833480

</div></div></div></div></a></div><div class="mx-4"><a href="/blog/2023-8-24-reactexperience/doc/index.html" title="Reactä¹‹è·¯ - ç¬¬ä¸€ç¯‡"><div class="card bg-color cursor-pointer	 postCard rounded-lg w-full mb-4 shadow-xl flex relative hover:shadow-md transition ease-in-out delay duration-300 hover:scale-95"><div class="flex"><div class="w-full p-4"><div class="flex justify-between"><div></div><div class="flex tools"><div class="text-sm mr-6"><time datetime="Sun Jul 02 2023 00:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">2023/7/2</time></div><div class="text-sm mr-6">0.3Kå­—</div><div class="text-sm">414 å¤©å‰</div></div></div><div class="flex justify-between items-center mt-2"><div class="w-5/6"><div class="text-2xl font-medium title line-clamp-1 leading-relaxed">Reactä¹‹è·¯ - ç¬¬ä¸€ç¯‡</div></div><div class="text-sm text-gray-500">æ—¥å¸¸ç”Ÿæ´»</div></div><div class="text-sm text-gray-500 mt-3 line-clamp-4 leading-relaxed"> 
### å¸¸ç”¨çš„ React åº“

    - react   // ä¸å¿…å¤šè¯´
    - react-dom  // Reactçš„å®˜æ–¹æ¸²æŸ“åº“ï¼Œç”¨äºå°†Reactç»„ä»¶æ¸²æŸ“åˆ°æµè§ˆå™¨ä¸­
    - react-router-dom // React å®˜æ–¹è·¯ç”±åº“
    - react-redux // React å®˜æ–¹çŠ¶æ€ç®¡ç†åº“
    - react-query // ç”¨äºç®¡ç†å’Œå¤„ç†æ•°æ®çš„Reactåº“
    - @tanstack/react-query æ˜¯ react-query çš„ä¸€ä¸ªæ‰©å±•åº“ï¼Œç”± TanStack ç»´æŠ¤ æœ‰ä¸€äº›react-query æ²¡æœ‰çš„åŠŸèƒ½
    - redux-persist ç”¨äºæŒä¹…åŒ–å­˜å‚¨ReduxçŠ¶æ€çš„åº“ï¼Œä¼šå°†Reduxçš„çŠ¶æ€ç¼“å­˜åˆ°loaclStorage sessionStorageä¸­ èƒ½å¤Ÿä½¿é¡µé¢åˆ·æ–°ä¿ç•™çŠ¶æ€

### å‡½æ•°å¼ç»„ä»¶å†™æ³•

```bash
// å‚æ•°1çˆ¶ç»„ä»¶ä¼ é€’è¿›æ¥çš„å‚æ•°æ¥æ”¶
// å‚æ•°2ç”¨äºè®¿é—®ç»„ä»¶å®ä¾‹çš„æ–¹æ³•å’Œå±æ€§ï¼Œæˆ–è€…ç›´æ¥æ“ä½œ DOM å…ƒç´  React.forwardRef(MyComponent)

const ç»„ä»¶å(props,ref){
    const {name} = props;
    return &lt;div&gt; {name} &lt;/div&gt;
}

export default ç»„ä»¶å
```

### ç±»ç»„ä»¶å†™æ³•

```bash
import React from &#39;react&#39;

class ç»„ä»¶å extends React.Component{
    constructor(props){
        super(props);
        this.state={
            count: 0
        }
    }
    
    // ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•
    componentDidMount() {
        // ç»„ä»¶æŒ‚è½½åæ‰§è¡Œçš„æ“ä½œ
    }

    render(){
        return (
            &lt;div&gt; {this.state.count} &lt;/div&gt;
        )
    }
}

```

### å¸¸ç”¨çš„Hook

##### 1. useState
ç”¨æ¥å­˜å‚¨çŠ¶æ€å˜é‡å˜é‡ [something, setSomething] ç”¨è§£æ„æ–¹å¼å–å€¼
something ä¸ºçŠ¶æ€å˜é‡ï¼ŒsetSomething ä¸ºæ”¹å˜çŠ¶æ€å˜é‡çš„æ–¹æ³•

```bash 
# ç¤ºä¾‹
import React, { useState } from &quot;react&quot;;

const [something, setSomething] = useState(0); 
const [something1, setSomething1] = useState({
    test:222
});
const [something2, setSomething2] = useState(&quot;222&quot;);

# ä¿®æ”¹çŠ¶æ€å˜é‡somethingçš„æ–¹æ³•
setSomething(1);

# ä¿®æ”¹çŠ¶æ€å˜é‡something1çš„æ–¹æ³•
setSomething1({
    something1ï¼Œ // è¿™é‡Œçš„something1 ä¸ºä¸Šé¢çš„çŠ¶æ€å˜é‡   
    test:333
});

# ä¿®æ”¹çŠ¶æ€å˜é‡something2çš„æ–¹æ³•
setSomething2(&quot;333&quot;);

```

##### 2. useEffect

ç”¨æ¥å¤„ç†å‰¯ä½œç”¨ï¼Œæ¯”å¦‚å¼‚æ­¥è¯·æ±‚ï¼Œå®šæ—¶å™¨ç­‰

```bash
# ç¤ºä¾‹
import React, { useState, useEffect } from &quot;react&quot;;

const [something, setSomething] = useState(0);

useEffect(() =&gt; {
    // ....ç”¨æ¥å¤„ç†éœ€è¦çš„å‰¯ä½œç”¨çš„å¤„ç†
}, [something]); // something ä¸ºä¾èµ–é¡¹ï¼Œå½“somethingå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseEffectä¼šé‡æ–°æ‰§è¡Œ

#å¦‚æœä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„ï¼Œä»–åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œç›¸å½“äºcomponentDidMount
useEffect(() =&gt; {
    // ....ç”¨æ¥å¤„ç†éœ€è¦çš„å‰¯ä½œç”¨çš„å¤„ç†
}, []);

```

##### 3. useContext

ç”¨æ¥å¤„ç†è·¨ç»„ä»¶ä¼ å€¼ï¼Œç±»ä¼¼äºvueä¸­çš„provide/inject ,æ–¹ä¾¿æ•°æ®å„ç§ç»„ä»¶ä¹‹é—´çš„ä¼ é€’ï¼Œä¹Ÿå¯ä»¥å«åšä¸Šä¸‹æ–‡ä¼ é€’

```bash
# ç¤ºä¾‹
import React, { useState, useContext } from &quot;react&quot;;

const [something, setSomething] = useState(0);

const Context = React.createContext(null);

# ç»„ä»¶å£°æ˜

&lt;Context.Provider value={context}&gt;
    &lt;ç»„ä»¶å /&gt;
&lt;/Context.Provider&gt;

# ç»„ä»¶æ¥æ”¶

const context = useContext(Context);

```


##### 4. useRef

ç”¨æ¥è·å–DOMå…ƒç´ æˆ–è€…ä¿å­˜å˜é‡

```bash

# ç¤ºä¾‹
import React, { useState, useRef } from &quot;react&quot;;

const [something, setSomething] = useState(0);

const ref = useRef(null);

# è·å–DOMå…ƒç´ 
&lt;div ref={ref}&gt;&lt;/div&gt;

# è·å–å˜é‡
ref.current

```

##### 5. useReducer
useReducer æ˜¯ useState çš„æ›¿ä»£æ–¹æ¡ˆ,ç”¨æ¥è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œç”¨äºå¤„ç†å¤æ‚çš„çŠ¶æ€é€»è¾‘,ä»–ä¸ä¼šæ”¹å˜åŸæœ‰çš„çŠ¶æ€ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚

``` bash
# ç¤ºä¾‹

import React, { useReducer } from &quot;react&quot;;

// åˆå§‹åŒ–çŠ¶æ€
const initState = { name: &#39;123&#39; }

// reducer å‡½æ•°
const reducer = (state: any, action: any) =&gt; {
    return action.type === &#39;add&#39; ? { name: &#39;456&#39; } : { name: &#39;789&#39; }
}

// useReducer æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºreducerå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºåˆå§‹åŒ–çŠ¶æ€
const [state, dispatch] = useReducer(reducer, initState);

# ä¿®æ”¹çŠ¶æ€
dispatch({ type: &#39;add&#39; })

```
![åˆ‡å›¾2](http://img.blog.loli.wang/2023-8-24-ReactExperience/02.png)


ä¸‹ä¸€æ¬¡å†™è„šæ‰‹æ¶çš„æ—¶å€™å†å»å¡«å……ã€‚ã€‚ã€‚ã€‚



å‚è€ƒæ–‡æ¡£ [é˜®ä¸€å³°åšå®¢](https://www.ruanyifeng.com/blog/2019/09/react-hooks.html)


</div></div><div><img src="http://img.blog.loli.wang/2023-8-24-ReactExperience/01.png" class="w-[500px] h-[200px] rounded-r-lg object-cover" style="clip-path:polygon(0 0,100% 0,100% 100%,20% 100%)"></div></div></div></a></div><div class="mx-4"><a href="/blog/2023-8-25-vuemini1/doc/index.html" title="Vue3æºç å­¦ä¹  - 1.æ­å»ºé¡¹ç›®é›å½¢"><div class="card bg-color postCard mb-4 rounded-lg w-full shadow-xl cursor-pointer	 flex relative hover:shadow-md transition ease-in-out delay duration-300 hover:scale-95"><div class="flex"><div><img src="http://img.blog.loli.wang/2023-8-25-vuemini1/01.png" class="w-[500px] h-[200px] rounded-l-lg" style="clip-path:polygon(0 0,88% 0,100% 100%,0 100%)"></div><div class="w-full p-4"><div class="flex justify-between"><div></div><div class="flex tools"><div class="text-sm mr-6"> <time datetime="Sun Jul 02 2023 00:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)">2023/7/2</time> </div><div class="text-sm mr-6">0.2Kå­—</div><div class="text-sm">414 å¤©å‰</div></div></div><div class="flex justify-between items-center mt-2"><div><div class="text-2xl font-medium title">Vue3æºç å­¦ä¹  - 1.æ­å»ºé¡¹ç›®é›å½¢</div></div><div class="text-sm text-gray-500">æ—¥å¸¸ç”Ÿæ´»</div></div><div class="text-sm text-gray-500 mt-3 line-clamp-4 leading-relaxed">
# Vue3 æºç å‡†å¤‡

é¡¹ç›®é¡¹ç›®æºç åœ°å€ï¼š[itmowang/mini-vue](https://github.com/itmowang/mini-vue)

### é¡¹ç›®æ‰€ç”¨åŒ…ç®¡ç†å·¥å…·è¯·ä¸€åˆ‡ä½¿ç”¨ PNPM
``` bash 
npm install pnpm -g
```

### é¡¹ç›®ç›®å½•ç»“æ„
```bash
packages/ 
â”£ compiler-core/  # ç¼–è¯‘å™¨æ ¸å¿ƒæ¨¡å—
â”ƒ â”£ src/
â”ƒ â”ƒ â”— index.ts
â”ƒ â”— README.md
â”£ compoler-dom/  # æµè§ˆå™¨éƒ¨åˆ†ç¼–è¯‘æ¨¡å—
â”ƒ â”£ src/
â”ƒ â”ƒ â”— index.ts
â”ƒ â”— README.md
â”£ reactivity/    # å“åº”æ€§æ¨¡å—
â”ƒ â”£ src/
â”ƒ â”ƒ â”— index.ts
â”ƒ â”— README.md
â”£ runtime-core/  # è¿è¡Œæ—¶æ ¸å¿ƒæ¨¡å—
â”ƒ â”£ src/
â”ƒ â”ƒ â”— index.ts
â”ƒ â”— README.md
â”£ runtime-dom/   # æµè§ˆå™¨éƒ¨åˆ†è¿è¡Œæ—¶æ¨¡å—
â”ƒ â”£ src/
â”ƒ â”ƒ â”— index.ts
â”ƒ â”— README.md
â”£ shared/        # å…±äº«å…¬å…±æ–¹æ³•æ¨¡å—
â”ƒ â”£ src/
â”ƒ â”ƒ â”— index.ts
â”ƒ â”— README.md
â”— vue/           # æ‰“åŒ…æµ‹è¯•é¡¹ç›®æ•´ä½“å…¥å£æ¨¡å—
  â”£ src/
â”ƒ â”ƒ â”— index.ts
  â”— README.md

```

#### å®‰è£…Typescript

```

 pnpm install typescript

 tsc --init # ç”Ÿæˆé…ç½®æ–‡ä»¶

```

``` bash 
{
  // ç¼–è¾‘å™¨é…ç½®
  &quot;compilerOptions&quot;: {
    // æ ¹ç›®å½•
    &quot;rootDir&quot;: &quot;.&quot;,
    // ä¸¥æ ¼æ¨¡å¼æ ‡å¿—
    &quot;strict&quot;: true,
    // æŒ‡å®šç±»å‹è„šæœ¬å¦‚ä½•ä»ç»™å®šçš„æ¨¡å—è¯´æ˜ç¬¦æŸ¥æ‰¾æ–‡ä»¶ã€‚
    &quot;moduleResolution&quot;: &quot;node&quot;,
    // https://www.typescriptlang.org/tsconfig#esModuleInterop
    &quot;esModuleInterop&quot;: true,
    // JS è¯­è¨€ç‰ˆæœ¬
    &quot;target&quot;: &quot;es5&quot;,
    // å…è®¸æœªè¯»å–å±€éƒ¨å˜é‡
    &quot;noUnusedLocals&quot;: false,
    // å…è®¸æœªè¯»å–çš„å‚æ•°
    &quot;noUnusedParameters&quot;: false,
    // å…è®¸è§£æ json
    &quot;resolveJsonModule&quot;: true,
    // æ”¯æŒè¯­æ³•è¿­ä»£ï¼šhttps://www.typescriptlang.org/tsconfig#downlevelIteration
    &quot;downlevelIteration&quot;: true,
    // å…è®¸ä½¿ç”¨éšå¼çš„ any ç±»å‹ï¼ˆè¿™æ ·æœ‰åŠ©äºæˆ‘ä»¬ç®€åŒ– ts çš„å¤æ‚åº¦ï¼Œä»è€Œæ›´åŠ ä¸“æ³¨äºé€»è¾‘æœ¬èº«ï¼‰
    &quot;noImplicitAny&quot;: false,
    // æ¨¡å—åŒ–
    &quot;module&quot;: &quot;esnext&quot;,
    // è½¬æ¢ä¸º JavaScript æ—¶ä» TypeScript æ–‡ä»¶ä¸­åˆ é™¤æ‰€æœ‰æ³¨é‡Šã€‚
    &quot;removeComments&quot;: false,
    // ç¦ç”¨ sourceMap
    &quot;sourceMap&quot;: false,
    // https://www.typescriptlang.org/tsconfig#lib
    &quot;lib&quot;: [&quot;esnext&quot;, &quot;dom&quot;],
  },
  // å…¥å£
  &quot;include&quot;: [&quot;packages/*/src&quot;]
}
```

### å®‰è£…rollup æ‰“åŒ…å·¥å…·

``` bash
pnpm install rollup

pnpm install @rollup/plugin-node-resolve # æ¨¡å—å¯¼å…¥è·¯å¾„è¡¥å…¨

pnpm install @rollup/plugin-commonjs # å°†ä»£ç å¼•ç”¨è½¬æ¢ä¸º es2015

pnpm install @rollup/plugin-typescript # ts æ”¯æŒ

pnpm install tslib 
```

```

import resolve from &#39;@rollup/plugin-node-resolve&#39;
import commonjs from &#39;@rollup/plugin-commonjs&#39;
import typescript from &#39;@rollup/plugin-typescript&#39;

// rollupçš„é…ç½®æ–‡ä»¶
export default [
  {
    // å…¥å£æ–‡ä»¶
    input: &#39;packages/vue/src/index.ts&#39;,
    // æ‰“åŒ…çš„è¾“å‡ºæ–‡ä»¶
    output: [
      {
        // å¼€å¯sourcemap
        sourcemap: true,
        file: &#39;packages/vue/dist/vue.js&#39;,
        format: &#39;iife&#39;,
        name: &#39;Vue&#39;
      }
    ],
    plugins: [
      // ts æ”¯æŒ
      typescript({
        sourceMap: true
      }),
      // æ¨¡å—å¯¼å…¥è·¯å¾„è¡¥å…¨
      resolve(),
      // commonjs æ¨¡å—è½¬æ¢æˆ es2015
      commonjs()
    ]
  }
]


```

åœ¨package.jsonæ–‡ä»¶ä¸­æ–°åŠ ä¸€ä¸ªscripts

```
    &quot;build&quot;:&quot;rollup -c -w&quot;
```
å¦‚æœå‡ºç°ä»¥ä¸‹è¿™æ ·è¯æ˜æˆåŠŸäº†

![rollupæ‰“åŒ…æˆåŠŸ](http://img.blog.loli.wang/2023-8-25-vuemini1/02.png)

é¡¹ç›®çš„é›å½¢ï¼Œä¸€ä¸ªæ ‡å‡†çš„monorepoé¡¹ç›®ã€‚</div></div></div></div></a></div><div class="pagination-container page-bar flex items-center justify-between bg-white p-4 rounded-md shadow-md"> <a href="/page/5/" class="prev text-blue-500 hover:text-blue-700 transition-colors duration-200" title="ä¸Šä¸€é¡µ">
ä¸Šä¸€é¡µ
</a> <span class="pagination-info text-gray-700">
ç¬¬ 6 é¡µ / å…± 7 é¡µ
</span> <a href="/page/7/" class="next text-blue-500 hover:text-blue-700 transition-colors duration-200" title="ä¸‹ä¸€é¡µ">
ä¸‹ä¸€é¡µ
</a> </div> </div> </div> </div>  </div> <footer data-astro-cid-sz7xmlte>
&copy; 2024 Your name here. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://m.webtoo.ls/@astro" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Follow Astro on Mastodon</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/mastodon" data-astro-cid-sz7xmlte><path fill="currentColor" d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://twitter.com/astrodotbuild" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Follow Astro on Twitter</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/twitter" data-astro-cid-sz7xmlte><path fill="currentColor" d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://github.com/withastro/astro" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Astro's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </div> </div> </main> </body></html>